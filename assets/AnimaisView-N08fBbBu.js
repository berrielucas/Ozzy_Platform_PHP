import{d as x,r as o,b,c as w,w as l,h as e,m as L,a as B,u as j,o as I,e as O,f as H,g as U,t as D,i as m,j as k,l as h,_ as R,k as T,p as G,n as Q}from"./index-CyU7WMZp.js";import{F as W}from"./Filter-9vLo2J3n.js";import{_ as X,a as Y}from"./ToggleMenu-Ge7VitD_.js";const Z={__name:"DateInput",props:{text:{type:String,required:!0},hide_details:{type:Boolean,required:!1},modelo:{type:Date,required:!1}},emits:{date:null},setup(_,{emit:n}){const C=_,r=n,s=x(null),d=x(null),a=x(!1);function f(P){r("date",null),s.value=null}function p(){(d.value!==s.value&&d.value!==null&&s.value!==null||d.value===null&&s.value!==null)&&(d.value=s.value,r("date",s.value),a.value=!1)}return C.modelo&&(s.value=C.modelo,d.value=C.modelo),(P,v)=>{const N=o("v-text-field"),c=o("v-date-picker"),t=o("v-menu");return b(),w(t,{modelValue:a.value,"onUpdate:modelValue":v[3]||(v[3]=g=>a.value=g),"close-on-content-click":!1,location:"left center"},{activator:l(({props:g})=>[e(N,L({modelValue:d.value,"onUpdate:modelValue":[v[0]||(v[0]=y=>d.value=y),v[1]||(v[1]=y=>d.value===null?f():void 0)],label:_.text,clearable:"",readonly:"",value:d.value!==null?d.value.toLocaleDateString():void 0},g,{"hide-details":!!_.hide_details}),null,16,["modelValue","label","value","hide-details"])]),default:l(()=>[e(c,{color:"var(--primary-color)",modelValue:s.value,"onUpdate:modelValue":v[2]||(v[2]=g=>s.value=g),hideHeader:"","on-update:model-value":p(),lang:"pt"},null,8,["modelValue","on-update:model-value"])]),_:1},8,["modelValue"])}}},ee={class:"w-100 py-2 px-4"},te=k("p",{class:"text-center"},"Nenhum cliente encontardo",-1),q={__name:"NewPet",props:{edit:{type:Boolean,required:!1},id:{type:Number,required:!1}},setup(_){const n=B(),C=j(),r=x(!1);I(()=>{n.userLogado.type==="client"&&(a.value.idCliente=n.userLogado.idCliente)});const s=_,d=s.edit?JSON.stringify(n.pets.filter(c=>c.idAnimal===s.id)[0]):JSON.stringify({nome:"",peso:0,nascimento:null,cor:null,observacao:null,idCliente:null}),a=x(JSON.parse(d)),f=x(s.edit?`Kg ${a.value.peso}`.replace(".",","):"Kg 0,000"),p=O(()=>{const{peso:c,display:t}=n.formatPeso(f.value);a.value.peso=c,f.value=t});function P(c){if(c===null)a.value.nascimento=null;else{const t=new Date(c);a.value.nascimento=t.toISOString().split("T")[0]}}function v(){s.edit?n.atualizarPet(a.value):n.cadastrarPet(a.value),r.value=!1,a.value=JSON.parse(d)}function N(){r.value=!1,C.push({name:"clientes"})}return(c,t)=>{const g=o("v-list-item"),y=o("v-btn"),$=o("v-text-field"),V=o("v-col"),A=o("v-autocomplete"),u=o("v-textarea"),S=o("v-row"),z=o("v-card-text"),J=o("v-divider"),M=o("v-spacer"),E=o("v-card-actions"),F=o("v-card"),K=o("v-dialog");return b(),H("div",null,[s.edit?(b(),w(g,{key:0,onClick:t[0]||(t[0]=i=>r.value=!0)},{default:l(()=>[U("Acessar")]),_:1})):(b(),w(y,{key:1,onClick:t[1]||(t[1]=i=>r.value=!0),class:"text-none ml-4",variant:"elevated",text:"Adicionar",style:{"background-color":"var(--primary-color)",color:"white","border-radius":"10px","font-size":"medium"}})),e(K,{modelValue:r.value,"onUpdate:modelValue":t[12]||(t[12]=i=>r.value=i),width:"auto",persistent:""},{default:l(()=>[e(F,{"prepend-icon":"mdi-dog",title:s.edit?"Animal":"Novo Animal",width:"700"},{default:l(()=>[e(z,{class:"px-4 pb-3"},{default:l(()=>[U(D()+" ",1),e(S,{dense:""},{default:l(()=>[e(V,{cols:m(n).userLogado.type==="user"?"6":"12"},{default:l(()=>[e($,{modelValue:a.value.nome,"onUpdate:modelValue":t[2]||(t[2]=i=>a.value.nome=i),label:"Nome *",required:""},null,8,["modelValue"])]),_:1},8,["cols"]),m(n).userLogado.type==="user"?(b(),w(V,{key:0,cols:"6"},{default:l(()=>[e(A,{modelValue:a.value.idCliente,"onUpdate:modelValue":t[4]||(t[4]=i=>a.value.idCliente=i),items:m(n).clientes,label:"Cliente *","item-title":"nome","item-value":"idCliente",required:"",clearable:""},{"no-data":l(()=>[k("div",ee,[te,m(n).userLogado.type!=="client"?(b(),w(y,{key:0,onClick:t[3]||(t[3]=i=>N()),class:"text-none w-100 mt-3",variant:"tonal",color:"var(--primary-color)",text:"Adicionar Cliente"})):h("",!0)])]),_:1},8,["modelValue","items"])]),_:1})):h("",!0),e(V,{cols:"12",md:"4",sm:"6"},{default:l(()=>[e(Z,{text:"Data de Nascimento *",onDate:t[5]||(t[5]=i=>P(i)),modelo:a.value.nascimento!==null?new Date(`${a.value.nascimento} 00:00:00`):void 0},null,8,["modelo"])]),_:1}),e(V,{cols:"12",md:"4",sm:"6"},{default:l(()=>[e($,{modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=i=>f.value=i),update:p.value,"onUpdate:update":t[7]||(t[7]=i=>p.value=i),maxlength:"10",label:"Peso *",required:""},null,8,["modelValue","update"])]),_:1}),e(V,{cols:"12",md:"4",sm:"6"},{default:l(()=>[e($,{modelValue:a.value.cor,"onUpdate:modelValue":t[8]||(t[8]=i=>a.value.cor=i),label:"Cor *",required:""},null,8,["modelValue"])]),_:1}),e(V,{cols:"12"},{default:l(()=>[e(u,{modelValue:a.value.observacao,"onUpdate:modelValue":t[9]||(t[9]=i=>a.value.observacao=i),label:"Observação",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(J),e(E,{class:"px-4"},{default:l(()=>[e(M),e(y,{onClick:t[10]||(t[10]=i=>{r.value=!1,a.value=JSON.parse(m(d))}),class:"text-none",text:"Cancelar",variant:"plain"}),e(y,{onClick:t[11]||(t[11]=i=>v()),class:"text-none",color:"var(--primary-color)",text:"Salvar",variant:"tonal"})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])])}}},le=_=>(G("data-v-47444018"),_=_(),Q(),_),ae={style:{display:"flex","font-weight":"500","font-size":"20px"}},oe=le(()=>k("div",{class:"pt-10 py-4"},[k("h3",{class:"font-weight-medium opacity-80"},"Nenhum Pet encontrado na base.")],-1)),ne={class:"pb-3 pt-4"},se={__name:"AnimaisView",setup(_){const n=B();I(()=>{n.listarPets(),n.userLogado.type==="client"&&(a.headers=a.headers.filter(f=>f.title!=="Cliente"))});const C=x(""),r=x(1),s=x(10),d=O(()=>Math.ceil(users.data.length/s.value)),a=T({headers:[{title:"Nome",align:"start",key:"nome"},{title:"Data de Nascimento",key:"nascimento"},{title:"Peso",key:"peso"},{title:"Cor",key:"cor"},{title:"Cliente",key:"nomeCliente"},{title:"Ações",key:"action",align:"end",sortable:!1}]});return(f,p)=>{const P=o("v-app-bar"),v=o("v-skeleton-loader"),N=o("v-btn"),c=o("v-list-item"),t=o("v-list"),g=o("v-menu"),y=o("v-pagination"),$=o("v-data-table"),V=o("v-card"),A=o("v-main");return b(),w(A,{style:{padding:"0",margin:"0"}},{default:l(()=>[e(P,{class:"py-1 px-3","scroll-behavior":"elevate",density:"compact"},{prepend:l(()=>[e(X),k("h3",ae,D(f.$route.meta.titulo),1)]),append:l(()=>[e(W,{onItemsPerPage:p[0]||(p[0]=u=>s.value=u)}),e(Y,{class:"ml-4",style:{"max-width":"300px"},onValor:p[1]||(p[1]=u=>C.value=u)}),e(q)]),_:1}),e(V,{class:"mx-2 my-4",elevation:"0",style:{"border-radius":"0"}},{default:l(()=>[e($,{loading:m(n).loadPets,disabled:m(n).loadPets&&m(n).pets.length>0,class:"content",page:r.value,"onUpdate:page":p[3]||(p[3]=u=>r.value=u),headers:a.headers,items:m(n).pets,"items-per-page":s.value,"fixed-header":"",style:{"font-size":"16px"},hover:m(n).pets.length>0},{"no-data":l(()=>[oe]),loading:l(()=>[e(v,{type:"table-row-divider@3"})]),"item.nascimento":l(({item:u})=>[k("p",null,D(new Date(`${u.nascimento} 00:00:00`).toLocaleDateString()),1)]),"item.peso":l(({item:u})=>[k("p",null,D(m(n).formatPeso(u.peso).display),1)]),"item.action":l(({item:u})=>[e(g,{location:"bottom right","close-on-content-click":!1},{activator:l(({props:S})=>[e(N,L({icon:"mdi-dots-vertical"},S,{variant:"text",size:"40"}),null,16)]),default:l(()=>[e(t,{style:{width:"150px"}},{default:l(()=>[e(q,{edit:!0,id:u.idAnimal},null,8,["id"]),e(c,{onClick:S=>m(n).deletarPet({idAnimal:u.idAnimal})},{default:l(()=>[U("Excluir")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),bottom:l(()=>[k("div",ne,[!m(n).loadPets&&m(n).pets.length>0&&m(n).pets.length>s.value?(b(),w(y,{key:0,rounded:"",style:{"max-width":"700px","margin-inline":"auto"},modelValue:r.value,"onUpdate:modelValue":p[2]||(p[2]=u=>r.value=u),length:d.value},null,8,["modelValue","length"])):h("",!0)])]),_:1},8,["loading","disabled","page","headers","items","items-per-page","hover"])]),_:1})]),_:1})}}},re=R(se,[["__scopeId","data-v-47444018"]]);export{re as default};
