import{a as B,d as f,e as M,r as o,b as y,f as J,c as V,w as a,g as q,h as e,i as c,_ as O,o as A,k as D,j as w,t as E,m as F,l as R,p as j,n as T}from"./index-CyU7WMZp.js";import{F as G}from"./Filter-9vLo2J3n.js";import{_ as H,a as K}from"./ToggleMenu-Ge7VitD_.js";const U={__name:"NewService",props:{edit:{type:Boolean,required:!1},id:{type:Number,required:!1}},setup(u){const n=B(),v=f(!1),r=u,p=r.edit?JSON.stringify(n.servicos.filter(_=>_.idServico===r.id)[0]):JSON.stringify({nome:"",preco:0,descricao:""}),s=f(JSON.parse(p)),m=f(r.edit?`R$ ${s.value.preco}`.replace(".",","):"R$ 0,00"),b=M(()=>{const{preco:_,display:t}=n.formatMoeda(m.value);s.value.preco=_,m.value=t});function d(){r.edit?n.atualizarServico(s.value):n.cadastrarServico(s.value),v.value=!1,s.value=JSON.parse(p)}return(_,t)=>{const h=o("v-list-item"),g=o("v-btn"),S=o("v-text-field"),x=o("v-col"),N=o("v-textarea"),C=o("v-row"),$=o("v-card-text"),P=o("v-divider"),i=o("v-spacer"),k=o("v-card-actions"),z=o("v-card"),I=o("v-dialog");return y(),J("div",null,[r.edit?(y(),V(h,{key:0,onClick:t[0]||(t[0]=l=>v.value=!0)},{default:a(()=>[q("Acessar")]),_:1})):(y(),V(g,{key:1,onClick:t[1]||(t[1]=l=>v.value=!0),class:"text-none ml-4",variant:"elevated",text:"Adicionar",style:{"background-color":"var(--primary-color)",color:"white","border-radius":"10px","font-size":"medium"}})),e(I,{modelValue:v.value,"onUpdate:modelValue":t[8]||(t[8]=l=>v.value=l),width:"auto",persistent:""},{default:a(()=>[e(z,{"prepend-icon":"mdi-toolbox",title:r.edit?"Serviço":"Novo Serviço",width:"700"},{default:a(()=>[e($,null,{default:a(()=>[e(C,{dense:""},{default:a(()=>[e(x,{cols:"12",md:"8",sm:"8"},{default:a(()=>[e(S,{modelValue:s.value.nome,"onUpdate:modelValue":t[2]||(t[2]=l=>s.value.nome=l),label:"Nome *",required:""},null,8,["modelValue"])]),_:1}),e(x,{cols:"12",md:"4",sm:"4"},{default:a(()=>[e(S,{modelValue:m.value,"onUpdate:modelValue":t[3]||(t[3]=l=>m.value=l),update:b.value,"onUpdate:update":t[4]||(t[4]=l=>b.value=l),maxlength:"12",label:"Preço *",required:""},null,8,["modelValue","update"])]),_:1}),e(x,{cols:"12"},{default:a(()=>[e(N,{modelValue:s.value.descricao,"onUpdate:modelValue":t[5]||(t[5]=l=>s.value.descricao=l),label:"Descrição *",maxlength:"255",counter:"",required:"",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(P),e(k,{class:"px-4"},{default:a(()=>[e(i),e(g,{onClick:t[6]||(t[6]=l=>{v.value=!1,s.value=JSON.parse(c(p))}),class:"text-none",text:"Cancelar",variant:"plain"}),e(g,{onClick:t[7]||(t[7]=l=>d()),class:"text-none",color:"var(--primary-color)",text:"Salvar",variant:"tonal"})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])])}}},L=u=>(j("data-v-57b6c479"),u=u(),T(),u),Q={style:{display:"flex","font-weight":"500","font-size":"20px"}},W=L(()=>w("div",{class:"pt-10 py-4"},[w("h3",{class:"font-weight-medium opacity-80"},"Nenhum serviço encontrado na base.")],-1)),X={class:"pb-3 pt-4"},Y={__name:"ServicosView",setup(u){const n=B();A(()=>{n.listarServicos()});const v=f(""),r=f(1),p=f(10),s=M(()=>Math.ceil(n.servicos.length/p.value)),m=D({headers:[{align:"start",key:"nome",title:"Nome",width:500},{title:"Descrição",key:"descricao",width:500},{title:"Preço",key:"preco"},{title:"Ações",key:"action",align:"end"}]});return(b,d)=>{const _=o("v-app-bar"),t=o("v-skeleton-loader"),h=o("v-btn"),g=o("v-list-item"),S=o("v-list"),x=o("v-menu"),N=o("v-pagination"),C=o("v-data-table"),$=o("v-card"),P=o("v-main");return y(),V(P,{style:{padding:"0",margin:"0"}},{default:a(()=>[e(_,{class:"py-1 px-3","scroll-behavior":"elevate",density:"compact"},{prepend:a(()=>[e(H),w("h3",Q,E(b.$route.meta.titulo),1)]),append:a(()=>[e(G,{onItemsPerPage:d[0]||(d[0]=i=>p.value=i)}),e(K,{class:"ml-4",style:{"max-width":"300px"},onValor:d[1]||(d[1]=i=>v.value=i)}),e(U)]),_:1}),e($,{class:"mx-2 my-4",elevation:"0",style:{"border-radius":"0"}},{default:a(()=>[e(C,{loading:c(n).loadServicos,disabled:c(n).loadServicos&&c(n).servicos.length>0,class:"content",page:r.value,"onUpdate:page":d[3]||(d[3]=i=>r.value=i),headers:m.headers,items:c(n).servicos,"items-per-page":p.value,"fixed-header":"",style:{"font-size":"16px"},"show-select":!1,hover:c(n).servicos.length>0},{"no-data":a(()=>[W]),loading:a(()=>[e(t,{type:"table-row-divider@3"})]),"item.action":a(({item:i})=>[e(x,{location:"bottom right","close-on-content-click":!1},{activator:a(({props:k})=>[e(h,F({icon:"mdi-dots-vertical"},k,{variant:"text",size:"40"}),null,16)]),default:a(()=>[e(S,{style:{width:"150px"}},{default:a(()=>[e(U,{edit:!0,id:i.idServico},null,8,["id"]),e(g,{onClick:k=>c(n).deletarServico({idServico:i.idServico})},{default:a(()=>[q("Excluir")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),bottom:a(()=>[w("div",X,[!c(n).loadServicos&&c(n).servicos.length>0&&c(n).servicos.length>p.value?(y(),V(N,{key:0,rounded:"",style:{"max-width":"700px","margin-inline":"auto"},modelValue:r.value,"onUpdate:modelValue":d[2]||(d[2]=i=>r.value=i),length:s.value},null,8,["modelValue","length"])):R("",!0)])]),_:1},8,["loading","disabled","page","headers","items","items-per-page","hover"])]),_:1})]),_:1})}}},oe=O(Y,[["__scopeId","data-v-57b6c479"]]);export{oe as default};
